{"problem_name": "imo_1984_p6", "category": "unknown", "metadata": {}, "informal_statement": "Let $a,b,c,d$ be odd integers such that $0<a<b<c<d$ and $ad=bc$. Prove that if $a+d=2^k$ and $b+c=2^m$ for some integers $k$ and $m$, then $a=1$.", "informal_proof": "Let $f:[1,b]\\rightarrow \\mathbb{R},\\ f(x)=x+\\dfrac{bc}{x}$. As $f^\\prime (x)=1-\\dfrac{bc}{x^2}\\le 0$, we infer that $f(x)\\ge f(b)=b+c,\\ \\forall x\\in [1,b]$; in particular, $a+d=f(a)\\ge b+c\\Leftrightarrow k\\ge m$.\n\nNow, $ad=bc\\Leftrightarrow a(2^k-a)=b(2^m-b)\\Leftrightarrow (b-a)(a+b)=2^m(b-2^{k-m}a)$, hence $2^m|(b-a)(a+b)$. It is easy to see that for $x,y\\in \\mathbb{Z}$, if $v_2(x\\pm y)\\ge 2$, then $v_2(x\\mp y)=1$. If $v_2(b-a)\\ge 2$, $v_2(a+b)=1$, so $v_2(b-a)\\ge m-1\\Rightarrow b>2^{m-1}$, which is in contradiction with the fact that $b<\\dfrac{b+c}{2}=2^{m-1}$. Thereby, $v_2(a+b)\\ge m-1,\\ v_2(b-a)=1$.\n\nWrite $a+b=2^{m-1}\\alpha$. If $\\alpha \\ge 2\\Rightarrow2^m\\le a+b<b+c=2^m$, contradiction; so $a+b=2^{m-1}$ and $b-a=2\\beta$, or equivalently $a=2^{m-2}-\\beta,\\ b=2^{m-2}+\\beta$ ( $m>2$ otherwise $b+c=2\\Leftrightarrow b=c=1$ or $b+c=4\\Leftrightarrow c=3,b=1\\Rightarrow a=0$ , contradiction )\n\n\nSubstituting back, $(b-a)(a+b)=2^m(b-2^{k-m}a)\\Leftrightarrow 2^m\\beta=2^m(2^{m-2}+\\beta-2^{k-m}a)\\Leftrightarrow 2^{k-m}a=2^{m-2}$\n\nAs $m>2$ and $a$ is odd, we get that $a=1$. Furthermore, $k=2m-2$, hence $d=2^{2m-2}-1$. Now $b(2^m-b)=2^{2m-2}-1\\Leftrightarrow \\left ( b-(2^{m-1}-1) \\right ) \\left ( b-(2^{m-1}+1)\\right )=0$ which together with the fact that $b<c$, we get that $b=2^{m-1}-1,\\ c=2^{m-1}+1$, so the family of the solutions $(a,b,c,d)$ is described by the set\n$ M=\\{ \\left (1,2^{m-1}-1,2^{m-1}+1,2^{2m-2}-1 \\right )|\\ m\\in \\mathbb{N},m\\ge 3 \\}$\n\nThis solution was posted and copyrighted by TheFunkyRabbit. The original thread for this problem can be found here: [https://aops.com/community/p4908989]", "formal_statement": "theorem imo_1984_p6:\n  fixes a b c d k m ::nat\n  assumes \"0 < a \\<and> 0 < b \\<and> 0 < c \\<and> 0 < d\"\n    and \"odd a \\<and> odd b \\<and> odd c \\<and> odd d\"\n    and \"a < b \\<and> b < c \\<and> c < d\"\n    and \"a * d = b * c\"\n    and \"a + d = 2^k\"\n    and \"b + c = 2^m\" \n  shows \"a = 1\"", "formal_code": "(*\n  Authors: Wenda Li\n*)\n\ntheory imo_1984_p6 \n  imports Complex_Main \"HOL-Computational_Algebra.Computational_Algebra\"\nbegin\n\ntheorem imo_1984_p6:\n  fixes a b c d k m ::nat\n  assumes \"0 < a \\<and> 0 < b \\<and> 0 < c \\<and> 0 < d\"\n    and \"odd a \\<and> odd b \\<and> odd c \\<and> odd d\"\n    and \"a < b \\<and> b < c \\<and> c < d\"\n    and \"a * d = b * c\"\n    and \"a + d = 2^k\"\n    and \"b + c = 2^m\" \n  shows \"a = 1\"\n  sorry\n\nend\n    "}