{"problem_name": "imo_1985_p6", "category": "unknown", "metadata": {}, "informal_statement": "For every real number $x_1$, construct the sequence $x_1,x_2,\\ldots$ by setting $x_{n+1}=x_n \\left(x_n + \\frac{1}{n}\\right)$ for each $n \\geq 1$.  Prove that there exists exactly one value of $x_1$ for which $0<x_n<x_{n+1}<1$ for every $n$.", "informal_proof": "By recursive substitution, one can write $x_n=P_n(x_1)$ , where $P_n$ is a polynomial with non-negative coefficients and zero constant term. Thus, $P_n(0)=0$, $P_n$ is strictly increasing in $[0,+\\infty)$ , and $\\displaystyle \\lim_{x_1 \\rightarrow + \\infty} P_n(x_1)=+\\infty$. We can therefore define the inverse $P_n^{-1}$ of $P_n$ on $[0,+\\infty)$. It follows that $x_1=P_n^{-1}(x_n)$, $P_n^{-1}(0)=0$, $P_n^{-1}$ is strictly increasing in $[0,+\\infty)$, and $\\displaystyle \\lim_{x_1 \\rightarrow + \\infty} P_n^{-1}(x_1) =+\\infty$.\n\nDenote by $\\displaystyle a_n=P_n^{-1}(1-\\frac{1}{n})$ and $b_n=P_n^{-1}(1)$. By the monotonicity of $P_n^{-1}$ we have $a_n<b_n$ for each $n$. Note that:\n\n(a) $\\displaystyle x_n<x_{n+1} \\Leftrightarrow x_n>1-\\frac{1}{n} \\Leftrightarrow P_n^{-1}(x_n)>P_n^{-1}(1-\\frac{1}{n}) \\Leftrightarrow x_1>a_n$;\n(b) $\\displaystyle x_n<1 \\Leftrightarrow P_n^{-1}(x_n)<P_n^{-1}(1) \\Leftrightarrow x_1<b_n$.\n\nThus, $0<x_n<x_{n+1}<1,\\forall n$ holds if and only if $a_n<x_1<b_n,\\forall n$, or $\\displaystyle x_1 \\in \\bigcap_{n=1}^{+\\infty}(a_n,b_n)$. We need to show that $\\displaystyle \\bigcap_{n=1}^{+\\infty}(a_n,b_n)$ is a singleton. We have:\n\n(c) if $x_1=a_n$, then $x_n=1-\\frac{1}{n}$, which implies that $x_{n+1}=1-\\frac{1}{n}<1-\\frac{1}{n+1}=P_{n+1}(a_{n+1})$, and $x_1<a_{n+1}$. It follows that $a_n<a_{n+1},\\forall n$; and\n(d) if $x_1=b_n$, then $x_n=1$, which implies that $x_{n+1}=1+\\frac{1}{n}>1=P_{n+1}(b_{n+1})$, and $x_1>b_{n+1}$. It follows that $b_n>b_{n+1},\\forall n$; and\n\nThus, $a_n<a_{n+1}<b_{n+1}<b_n, \\forall n$. Therefore, the two sequences $\\{a_n\\}_{n=1}^{+\\infty}$ and $\\{b_n\\}_{n=1}^{+\\infty}$ converge, and their limits $a$ and $b$ satisfy $a \\leq b$. Hence, $\\displaystyle \\bigcap_{n=1}^{+\\infty}(a_n,b_n)=[a,b]$ is non-empty, which demonstrates the existence of $x_1$.\n\nNow, suppose that $a \\leq x_1 \\leq x_1' \\leq b$. We have $x_{n+1}'-x_{n+1} = (x_n'-x_n)(x_n'+x_n+\\frac{1}{n}) \\geq (x_n'-x_n)(2-\\frac{1}{n}) \\geq (x_n'-x_n)$ for each $n$, so that $x_n'-x_n \\geq x_1'-x_1$ for each $n$. However, $1-\\frac{1}{n}<x_n \\leq x_n'<1$, so that $0 \\leq x_n'-x_n<\\frac{1}{n}$, which implies that $\\displaystyle \\lim_{n \\rightarrow +\\infty}(x_n'-x_n)=0$. Therefore, $x_1' \\leq x_1$, proving unicity.\n\nThis solution was posted and copyrighted by DAFR. The original thread for this problem can be found here: [https://aops.com/community/p2751173]", "formal_statement": "theorem imo_1985_p6:\n  fixes f :: \"nat \\<Rightarrow> real \\<Rightarrow> real\"\n  assumes \"\\<forall> x>0. f 1 x = x\"\n    and \"\\<forall> x>0. \\<forall> n. f (n + 1) x = f n x * (f n x + 1 / n)\" \n  shows \"\\<exists>! a. \\<forall> n. 0 < f n a \\<and> f n a < f (n + 1) a \\<and> f (n + 1) a < 1\"", "formal_code": "(*\n  Authors: Wenda Li\n*)\n\ntheory imo_1985_p6 \n  imports Complex_Main \"HOL-Computational_Algebra.Computational_Algebra\"\n  \"HOL-Number_Theory.Number_Theory\"\nbegin\n\ntheorem imo_1985_p6:\n  fixes f :: \"nat \\<Rightarrow> real \\<Rightarrow> real\"\n  assumes \"\\<forall> x>0. f 1 x = x\"\n    and \"\\<forall> x>0. \\<forall> n. f (n + 1) x = f n x * (f n x + 1 / n)\" \n  shows \"\\<exists>! a. \\<forall> n. 0 < f n a \\<and> f n a < f (n + 1) a \\<and> f (n + 1) a < 1\"\n  sorry\n\nend   "}